<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>游戏管理后台</title>



    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <!--<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>-->
    <link id="ie-style" href="/static/cs/ie.css" rel="stylesheet">
    <![endif]-->

    <!--[if IE 9]>
    <link id="ie9style" href="/static/cs/ie9.css" rel="stylesheet">
    <![endif]-->

    <script src="/static/page5/jquery-ui.min.js"></script>
    <script src="/static/page5/jquery.js"></script>
    <!-- start: Favicon -->

    <link href="/static/home/css/jqueryui.css" rel="stylesheet" type="text/css" />
    <link href="/static/home/css/vjpublic.css" rel="stylesheet" type="text/css" />
    <link href="/static/home/css/chart.css" rel="stylesheet" type="text/css" />
    <link href="/static/home/css/zTreeStyle.css" rel="stylesheet" type="text/css" />
    <link href="/static/home/css/treeview.css" rel="stylesheet" type="text/css" />
    <link href="/static/home/css/vjpage.css" rel="stylesheet" type="text/css" />
    <link href="/static/home/css/config.css" rel="stylesheet" type="text/css" />

    <!-- end: Favicon -->

    <style>
        #mytable {
            border: black solid 1px;
            width: 700px;
            text-align: center;
            position: relative;
            margin-top: -26%;
            margin-left: 38%;
        }
        th {
            font: bold 11px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
            color: #4f6b72;
            border-right: 1px solid #C1DAD7;
            border-bottom: 1px solid #C1DAD7;
            border-top: 1px solid #C1DAD7;
            letter-spacing: 2px;
            text-transform: uppercase;
            padding: 6px 6px 6px 12px;
        }
        td {
            border-right: 1px solid #C1DAD7;
            border-bottom: 1px solid #C1DAD7;
            background: #fff;
            font-size:11px;
            padding: 6px 6px 6px 12px;
            color: #4f6b72;
        }
        td.alt {
            background: #F5FAFA;
            color: #797268;
        }

    </style>


    <script type="text/javascript" src="/static/home/js/public.js"></script>
    <script type="text/javascript" src="/static/home/js/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="/static/home/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/static/home/js/resizeComponents.js"></script>

    <script type="text/javascript" src="/static/home/js/grid.locale-cn.js"></script>
    <script type="text/javascript" src="/static/home/js/jquery.jqGrid.min.js"></script>
    <script type="text/javascript" src="/static/home/js/jquery.ztree.all-3.5.min.js"></script>

<!--  123213-->

    <link id="base-style" href="/static/cs/style.css" rel="stylesheet">
    <link id="base-style-responsive" href="/static/cs/style-responsive.css" rel="stylesheet">




    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="/static/new/resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="/static/new/resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="/static/new/data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="/static/new/files/index/styles.css" type="text/css" rel="stylesheet"/>

    <script src="/static/new/resources/scripts/prototypePre.js"></script>
    <script src="/static/new/data/document.js"></script>
    <script src="/static/new/resources/scripts/prototypePost.js"></script>
    <script src="/static/new/files/index/data.js"></script>
    <script src="/static/new/files/index/Gmae_js.js"></script>
    <script src="/static/table/Table.js"></script>



    <script src="/static/jss/jquery-1.9.1.min.js"></script>
    <script src="/static/jss/jquery-migrate-1.0.0.min.js"></script>
    <script src="/static/jss/jquery-ui-1.10.0.custom.min.js"></script>
    <script src="/static/jss/jquery.ui.touch-punch.js"></script>





    <style>
        li{
            list-style: none;
            color: #f0f3f6;
        }

        hr{
            width: 180px;
        }
    </style>



    <script type="text/javascript">
        $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
        $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
        $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };





    </script>


</head>
<body >
<!-- 上底界面 (矩形) -->
<div id="base" class="">




    <div id="u116" class="ax_default box_1" data-label="上底界面">
        <div id="u116_div" class=""></div>
        <!-- Unnamed () -->
        <div id="u117" class="text" style="display:none; visibility: hidden">
            <p><span></span></p>
        </div>
    </div>



    <!-- 系统主页 (组合) -->
    <div id="u118" class="ax_default" data-label="系统主页" data-left="221" data-top="58" data-width="828" data-height="709">

        <!-- Unnamed (矩形) -->
        <div id="u119" class="ax_default box_2">
            <div id="u119_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u120" class="text" style="display:none; visibility: hidden">
                <p><span></span></p>
            </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u121" class="ax_default box_3">
            <div id="u121_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u122" class="text" style="display:none; visibility: hidden">
                <p><span></span></p>
            </div>
        </div>

        <!-- Unnamed (形状) -->
        <div id="u131" class="ax_default icon">
            <img id="u131_img" class="img " src="/static/new/images/index/u5_selected.png"/>
            <!-- Unnamed () -->
            <div id="u132" class="text" style="display:none; visibility: hidden">
                <p><span></span></p>
            </div>
        </div>

        <!-- Unnamed (形状) -->
        <div id="u133" class="ax_default icon">
            <img id="u133_img" class="img " src="/static/new/images/index/u133.png"/>
            <!-- Unnamed () -->
            <div id="u134" class="text" style="display:none; visibility: hidden">
                <p><span></span></p>
            </div>
        </div>






        <!-- 系统主页 (矩形) -->
        <div id="u135" class="ax_default label" data-label="系统主页">
            <div id="u135_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u136" class="text">
                <p><span>发送用户邮件</span></p>
            </div>
        </div>

        <!-- 系统主页 (矩形) -->
        <div id="u137" class="ax_default label" data-label="系统主页">
            <div id="u137_div" class=""></div>
            <!-- Unnamed () -->
            <div id="u138" class="text">
                <p><span>系统主页</span></p>
            </div>
        </div>


    </div>

</div>


<!-- Unnamed (矩形) -->
<div id="u2" class="ax_default box_2">
    <div id="u2_div" class=""></div>
    <!-- Unnamed () -->
    <div id="u3" class="text" style="display:none; visibility: hidden">
        <p><span></span></p>
    </div>
</div>

<!-- 系统主页 (组合) -->
<div id="u4" class="ax_default" data-label="系统主页" selectiongroup="01" data-left="14" data-top="58" data-width="99" data-height="23">

    <!-- Unnamed (形状) -->
    <div id="u5" class="ax_default icon selected" selectiongroup="01">
        <img id="u5_img" class="img " src="/static/new/images/index/u5_selected.png"/>
        <!-- Unnamed () -->
        <div id="u6" class="text" style="display:none; visibility: hidden">
            <p><span></span></p>
        </div>
    </div>

    <!-- 系统主页 (矩形) -->
    <div id="u7" class="ax_default label selected" data-label="系统主页">
        <div id="u7_div" class="selected"></div>
        <!-- Unnamed () -->
        <div id="u8" class="text">
            <p><span>系统主页</span></p>
        </div>
    </div>
</div>


<section  style="position: absolute;margin-top: 112px;margin-left: 20px;color: #f0f3f6"  class="acsdsdsd12">



</section>

<div id="content" class="span10" style="position: absolute;margin-top: 124px;margin-left: -20px;background-color: #46466b">



    <!--<hr style="background-color: #00FFFF">-->

    <div class="row-fluid">
        <div class="row-fluid sortable">
            <div class="box span12" style="height: 614px">
                <div class="box-header" data-original-title>
                    <h2><i class="halflings-icon white edit"></i><span class="break"></span>邮件管理</h2>
                    <div class="box-icon">
                        <a href="#" class="btn-setting"><i class="halflings-icon white wrench"></i></a>
                        <a href="#" class="btn-minimize"><i class="halflings-icon white chevron-up"></i></a>
                        <a href="#" class="btn-close"><i class="halflings-icon white remove"></i></a>
                    </div>
                </div>
                <div class="box-content">
                    <form class="form-horizontal">
                        <label class="control-label" for="selectError3">开始时间</label>
                        <div class="controls">

                            <div class="dpicker01" id="page5_jDateTimePicker1"><input type="text" id="page5_jDateTimePicker1_edit"></div>

                        </div>
                        <br>
                        <label class="control-label" for="selectError3">失效时间</label>
                        <div class="controls">
                            <div class=" dpicker01" id="page5_jDateTimePicker3"><input type="text" id="page5_jDateTimePicker3_edit"></div>
                        </div>
                        <br>
                        <label class="control-label" for="selectError3">邮件标题</label>
                        <div class="controls">
                            <input type="text" id="Emilhead">
                        </div>
                        <br>
                        <label class="control-label" for="selectError3">收件人昵称或ID</label>
                        <div class="controls">
                            <input type="text" id="Emilnc">
                        </div>
                        <br>
                        <label class="control-label" for="selectError3">收件人范围</label>
                        <div class="controls" id="PropName1111">
                            <input type="checkbox" value="1" name="sProblem">所有人<br>
                            <input type="checkbox" value="2" name="sProblem">VIP1
                            <input type="checkbox" value="3" name="sProblem">VIP2
                            <input type="checkbox" value="4" name="sProblem">VIP3
                            <input type="checkbox" value="5" name="sProblem">VIP4
                            <input type="checkbox" value="6" name="sProblem">VIP5<br>
                            <input type="checkbox" value="7" name="sProblem">VIP6
                            <input type="checkbox" value="8" name="sProblem">VIP7
                            <input type="checkbox" value="9" name="sProblem">VIP8
                            <input type="checkbox" value="10" name="sProblem">VIP9
                            <input type="checkbox" value="11" name="sProblem">VIP10
                        </div>
                        <br>
                        <label class="control-label" for="selectError3">道具名称</label>
                        <div class="controls">
                            <select id="PropName">
                                <option value="1">房卡</option>
                                <option value="2">核弹</option>
                                <option value="3">玫瑰</option>
                                <option value="4">元宝</option>
                                <option value="5">房卡</option>
                                <option value="6">参赛劵</option>
                            </select>
                        </div>
                        <br>
                        <label class="control-label" for="selectError3">道具数量</label>
                        <div class="controls">
                            <input type="text" id="PropNums">
                        </div>
                        <br>
                        <input type="button" onclick="Add_UserProp_Copy_table_o1()" value="添加到附件" style="margin-left: 18%">
                        <br>  <br>
                        <label class="control-label" for="selectError3">邮件内容</label>
                        <div class="controls">
                            <textarea id="msg_emil_001"></textarea>
                        </div>
                        <br>
                        <button type="button" class="btn btn-primary" onclick="Select_Bpuser_Emil()" style="margin-left: 20%">发送邮件</button>
                        <table id="mytable" cellspacing="0" >
                            <tr>
                                <th scope="col" abbr="Configurations" class="nobg">道具名称</th>
                                <th scope="col" abbr="Dual 1.8">道具数量</th>
                                <th>删除该行</th>
                            </tr>
                        </table>

                    </form>

                </div>

            </div>

        </div>


    </div>
</div>




<script src="/static/js/echarts-all.js"></script>


<script type="text/javascript" src="/static/js/chartroom.js"></script>
<script type="text/javascript" src="/static/js/Cookie.js"></script>
<script type="text/javascript" src="/static/js/head.js"></script>

<script src="/static/jss/jquery-1.9.1.min.js"></script>
<script src="/static/jss/jquery-migrate-1.0.0.min.js"></script>

<script src="/static/jss/jquery-ui-1.10.0.custom.min.js"></script>

<script src="/static/jss/jquery.ui.touch-punch.js"></script>





<!-- end: JavaScript-->

<script  type="application/javascript">
    var newArr = new Array();
    $(function(){
        $("#page5_jDateTimePicker1_edit").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: "yy-mm-dd"
        });
    });

    $(function(){
        $("#page5_jDateTimePicker3_edit").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: "yy-mm-dd"
        });
    });


    //客户端请求发送客户端邮件  UL
    function Select_Bpuser_Emil() {


        var endtime = document.getElementById("page5_jDateTimePicker1_edit").value;   //昵称
        var maxtime = document.getElementById("page5_jDateTimePicker3_edit").value;   //昵称
        var username = document.getElementById("Emilnc").value;   //昵称
        var head = document.getElementById("Emilhead").value; //标题
        var msg_emil = document.getElementById("msg_emil_001").value; //内容

        var checkboxValue= new Array();
        var checkboxText= new Array();

        var checkboxStr=document.getElementsByName("sProblem");

        for(var i=0; i<checkboxStr.length; i++){
            if(checkboxStr[i].checked){
                //alert(checkboxStr[i].value+","+checkboxStr[i].nextSibling.nodeValue);
                checkboxValue.push(checkboxStr[i].value);
                checkboxText.push(checkboxStr[i].nextSibling.nodeValue);
            }
        }
        // //输出值和文本
        // alert("checkboxValue:"+checkboxValue);
        // alert("checkboxText:"+checkboxText);



        var endtime1 = document.getElementById("PropName1111");   //昵称





        var  pa  = new Array()
        var tb=document.getElementById("mytable");    //获取table对像
        var rows=tb.rows;
        for(var i=1;i<rows.length;i++){    //--循环所有的行
            var cells=rows[i].cells;
            for(var j=0;j<2;j++){   //--循环所有的列
                pa.push(cells[j].innerHTML)
            }
        }
        // alert(pa)
        // alert(checkboxValue)
        socket = new WebSocket("ws://"+IPconf+":"+prot+"/ws/join");
        socket.onopen = function() {
            socket.send("1000"+GetCookies("UG"));
            socket.send("9029" + JSON.stringify({
                BG:"",
                UG:GetCookies("UG"),
                SID:parseInt(0),
                SA:username,
                TT:head,
                MS:msg_emil,
                PA:pa,
                BTime:endtime,
                CTime:maxtime,
                UL:checkboxValue
            }));
            socket.onmessage = function (msg) {

                // alert(msg.data)
                var newdate="";
                for(var i=0;i<msg.data.length;i++){
                    if (i>3){
                        newdate = newdate + msg.data[i];
                    }
                }
                obj = toJson(newdate)
                // alert(obj.Errcode)
                if (obj.Errcode == 0 || obj.Errcode == -1 ){
                    alert("添加成功")
                }else{
                    alert("添加失败")
                }
                socket.close()
            }
        }
    }





    function Add_UserProp_Copy_table_o1() {
        // var tr = $("<tr>");
        var propName = document.getElementById("PropName").value;
        var propNums = document.getElementById("PropNums").value;
        var  num  = 0
        if (propName == 2){
            propName = "核弹"
        }else{
            propName = "元宝"
        }
        if (newArr.length == 0){
            newArr.push([propName,propNums])
        }else{
            for (var i = 0;i<newArr.length;i++){
                if  (newArr[i][0] ==propName ) {
                    newArr[i][1] = parseInt(newArr[i][1])+parseInt(propNums)
                }else{
                    num = 1
                }
            }
        }
        if (num == 1) {
            if (newArr.length<=1){
                newArr.push([propName,propNums])
            }
        }
        // tr.append($("<td>").html(propName));
        // tr.append($("<td>").html(propNums));
        //
        // tr.append($("<td>").html( "<input type='button' onclick='Delete_The_Row("+propName+")' value='删除该行'><br>"));
        if(propName == null || propNums == 0){
            alert("道具名称不能为空或者道具数量不能为0");
        }else {
            $("table:eq(0) tr:gt(0)").remove();
            for (var s = 0;s<newArr.length;s++){
                var tr = $("<tr>");
                tr.append($("<td>").html(newArr[s][0]));
                tr.append($("<td>").html(newArr[s][1]));
              //  tr.append($("<td>").html( "<input type='button' onclick='Delete_The_Row_0001("+newArr[i][0]+")' value='删除该行'><br>"));
                tr.append($("<td>").html( "<input type='button' onclick='Delete_The_Row_0001("+s+")' value='删除该行'><br>"));
                $("table:eq(0)").append(tr);
            }
        }
    }
    function Delete_The_Row_0001(obj) {
         if (newArr.length <= 1){
             newArr = []
         }
        if (newArr.length == 1) {
            newArr = new Array();
        }
        // alert(newArr)
        if (obj == 0){
            newArr.splice(0,1)
        }else{
            newArr.splice(obj,obj)
        }
         $("table:eq(0) tr:gt(0)").remove();
         for (var i = 0;i<newArr.length;i++){
             var tr = $("<tr>");
             tr.append($("<td>").html(newArr[i][0]));
             tr.append($("<td>").html(newArr[i][1]));
             tr.append($("<td>").html( "<input type='button' onclick='Delete_The_Row_0001("+i+")' value='删除该行'><br>"));
             $("table:eq(0)").append(tr);
         }

    }




</script>


</body>
</html>